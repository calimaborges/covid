{"version":3,"sources":["App.js","parseCsv.js","getCsvUrl.js","index.js"],"names":["dataConfig","dataKey","name","stroke","App","data","dataGroupedBySigla","groupBy","dataGroupedByData","key","reduce","soma","curr","sigla","regiao","date","casosNovos","casosAcumulados","obitosNovos","obitosAcumulados","Object","values","BRASIL","estados","React","useState","estado","setEstado","FilterButton","onClick","style","border","padding","fontSize","margin","fontFamily","backgroundColor","color","outline","display","flexDirection","alignItems","marginBottom","keys","sort","map","width","minHeight","height","slice","strokeDasharray","type","lineProps","strokeWidth","href","target","rel","parseCsv","url","Promise","resolve","Papa","parse","dynamicTyping","download","complete","header","keepEmptyRows","skipEmptyLines","transformHeader","test","getCsvUrl","a","fetch","credentials","headers","accept","referrer","referrerPolicy","body","method","mode","response","json","results","arquivo","mainComponent","document","getElementById","innerHTML","csv","ReactDOM","render","StrictMode","main"],"mappings":"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","file":"static/js/main.fa16c24c.chunk.js","sourcesContent":["import React from \"react\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport groupBy from \"lodash.groupby\";\n\nconst dataConfig = [\n  { dataKey: \"casosAcumulados\", name: \"Casos Acumulados\", stroke: \"#387002\" },\n  { dataKey: \"casosNovos\", name: \"Casos Novos\", stroke: \"#99d066\" },\n  { dataKey: \"obitosAcumulados\", name: \"Óbitos Acumulados\", stroke: \"#9a0007\" },\n  { dataKey: \"obitosNovos\", name: \"Óbitos Novos\", stroke: \"#ff6659\" },\n];\n\nfunction App({ data }) {\n  const dataGroupedBySigla = groupBy(data, \"sigla\");\n  const dataGroupedByData = groupBy(data, \"date\");\n\n  for (let key in dataGroupedByData) {\n    dataGroupedByData[key] = dataGroupedByData[key].reduce((soma, curr) => {\n      return {\n        sigla: \"BRASIL\",\n        regiao: \"BRASIL\",\n        date: key,\n        casosNovos: (soma.casosNovos || 0) + curr.casosNovos,\n        casosAcumulados: (soma.casosAcumulados || 0) + curr.casosAcumulados,\n        obitosNovos: (soma.obitosNovos || 0) + curr.obitosNovos,\n        obitosAcumulados: (soma.obitosAcumulados || 0) + curr.obitosAcumulados,\n      };\n    });\n  }\n\n  dataGroupedBySigla[\"BRASIL\"] = Object.values(dataGroupedByData);\n\n  const { BRASIL, ...estados } = dataGroupedBySigla;\n  const [estado, setEstado] = React.useState(\"BRASIL\");\n\n  function FilterButton({ sigla }) {\n    return (\n      <button\n        onClick={() => setEstado(sigla)}\n        style={{\n          border: \"1px solid black\",\n          padding: \"0.4rem\",\n          fontSize: \"1.2rem\",\n          margin: \"0.1rem\",\n          fontFamily: \"monospace\",\n          backgroundColor: sigla === estado ? \"black\" : \"white\",\n          color: sigla === estado ? \"white\" : \"black\",\n          outline: \"none\",\n        }}\n      >\n        {sigla}\n      </button>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n      }}\n    >\n      <div style={{ marginBottom: \"1rem\" }}>\n        <FilterButton sigla=\"BRASIL\" />\n        {Object.keys(estados)\n          .sort()\n          .map((sigla) => (\n            <FilterButton key={sigla} sigla={sigla} />\n          ))}\n      </div>\n      <ResponsiveContainer width=\"98%\" minHeight={350} height=\"98%\">\n        <LineChart data={dataGroupedBySigla[estado].slice(26)}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <Tooltip />\n          <Legend />\n          <XAxis dataKey=\"date\" />\n          <YAxis type=\"number\" />\n          {dataConfig.map((lineProps) => (\n            <Line\n              key={lineProps.dataKey}\n              type=\"monotone\"\n              strokeWidth={2}\n              {...lineProps}\n            />\n          ))}{\" \"}\n        </LineChart>\n      </ResponsiveContainer>\n      <p>\n        Fonte:{\" \"}\n        <a\n          href=\"https://covid.saude.gov.br/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          https://covid.saude.gov.br/\n        </a>\n      </p>\n    </div>\n  );\n}\n\nexport default App;\n","import Papa from \"papaparse\";\n\nexport default function parseCsv(url) {\n  return new Promise((resolve) => {\n    Papa.parse(url, {\n      dynamicTyping: true,\n      download: true,\n      complete: resolve,\n      header: true,\n      keepEmptyRows: false,\n      skipEmptyLines: true,\n      transformHeader: function (header) {\n        if (/regi.o/.test(header)) {\n          return \"regiao\";\n        } else {\n          return header;\n        }\n      },\n    });\n  });\n}\n","export default async function getCsvUrl() {\n  const response = await fetch(\n    \"https://xx9p7hp1p7.execute-api.us-east-1.amazonaws.com/prod/PortalGeral\",\n    {\n      credentials: \"omit\",\n      headers: {\n        accept: \"application/json, text/plain, */*\",\n        \"accept-language\": \"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"cross-site\",\n        \"x-parse-application-id\": \"unAFkcaNDeXajurGB7LChj8SgQYS2ptm\",\n      },\n      referrer: \"https://covid.saude.gov.br/\",\n      referrerPolicy: \"no-referrer-when-downgrade\",\n      body: null,\n      method: \"GET\",\n      mode: \"cors\",\n    }\n  );\n  const json = await response.json();\n  return json?.results[0]?.arquivo?.url;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport parseCsv from \"./parseCsv\";\nimport getCsvUrl from \"./getCsvUrl\";\n\nasync function main() {\n  const mainComponent = document.getElementById(\"root\")\n  mainComponent.innerHTML = `<p>Obtendo endereço do CSV...</p>`;\n  const url = await getCsvUrl();\n\n  mainComponent.innerHTML = `<p>Obtendo CSV de ${url}...</p>`;\n  const csv = await parseCsv(url);\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <App data={csv.data} />\n    </React.StrictMode>,\n    mainComponent\n  );\n}\n\nmain();\n"],"sourceRoot":""}